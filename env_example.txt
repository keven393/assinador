# ============================================
# CONFIGURAÇÕES DA APLICAÇÃO
# ============================================

# Ambiente (development, production, testing)
FLASK_ENV=development
FLASK_DEBUG=True

# Chave secreta (GERE UMA NOVA PARA PRODUÇÃO!)
# Use: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=sua_chave_secreta_aqui_2024

# ============================================
# CONFIGURAÇÕES DO BANCO DE DADOS
# ============================================

# SQLite (APENAS DESENVOLVIMENTO - NÃO USE EM PRODUÇÃO!)
DATABASE_URL=sqlite:///assinador.db

# PostgreSQL (PRODUÇÃO - RECOMENDADO!)
# Descomente e configure para produção
# DATABASE_URL=postgresql://assinador_user:senha_forte@localhost:5432/assinador_db

# MySQL (PRODUÇÃO - Alternativa)
# Descomente e configure para produção
# DATABASE_URL=mysql://assinador_user:senha_forte@localhost:3306/assinador_db

# Async Database URL (para operações assíncronas)
# Automaticamente gerado a partir de DATABASE_URL, mas pode ser customizado
# ASYNC_DATABASE_URL=postgresql+asyncpg://assinador_user:senha_forte@localhost:5432/assinador_db

# ============================================
# CONFIGURAÇÕES DE SEGURANÇA
# ============================================

# Diretório seguro para chaves (fora do projeto)
# KEYS_DIR_SECURE=/etc/assinador/keys
KEYS_DIR_SECURE=

# CSRF Protection
WTF_CSRF_ENABLED=True
WTF_CSRF_TIME_LIMIT=3600

# Sessão
SESSION_LIFETIME_HOURS=24
SESSION_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# ============================================
# CONFIGURAÇÕES DE UPLOAD
# ============================================

# Tamanho máximo de upload (em bytes)
MAX_CONTENT_LENGTH=52428800
UPLOAD_FOLDER=temp_files

# ============================================
# CONFIGURAÇÕES DE DIRETÓRIOS
# ============================================

TEMP_DIR=temp_files
STATIC_DIR=static
SIGNATURES_DIR=signatures
CERTIFICATES_DIR=certificates
KEYS_DIR=keys
PDF_SIGNED_DIR=pdf_assinados
LOGS_DIR=logs

# ============================================
# CONFIGURAÇÕES DE LIMPEZA AUTOMÁTICA
# ============================================

# Intervalo de limpeza (em segundos)
CLEANUP_INTERVAL=3600

# Retenção de arquivos (em segundos)
FILE_RETENTION=86400

# Horário da limpeza diária (HH:MM)
CLEANUP_TIME=02:00

# Timezone para limpeza
CLEANUP_TZ=America/Sao_Paulo

# Retenção de arquivos
FILE_RETENTION_DAYS=7
TEMP_FILE_RETENTION_HOURS=1

# ============================================
# CONFIGURAÇÕES DE LOGGING
# ============================================

LOG_LEVEL=INFO
LOG_FILE=assinador.log
LOG_MAX_BYTES=10240000
LOG_BACKUP_COUNT=10

# ============================================
# CONFIGURAÇÕES DE CERTIFICADO
# ============================================

CERTIFICATE_VALIDITY_DAYS=1825
KEY_SIZE=2048

# ============================================
# CONFIGURAÇÕES DE SERVIDOR
# ============================================

# Host e porta
HOST=0.0.0.0
PORT=5001

# Workers para produção (apenas para Gunicorn)
WORKERS=4

# ============================================
# CONFIGURAÇÕES DE CACHE
# ============================================

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_STORAGE=memory://

# ============================================
# CONFIGURAÇÕES DO ACTIVE DIRECTORY / LDAP
# ============================================

# Habilitar/Desabilitar autenticação LDAP
LDAP_ENABLED=true

# Servidor LDAP
LDAP_SERVER=ldap://10.0.20.1
LDAP_PORT=389

# Base DN e credenciais de administração
LDAP_BASE_DN=OU=USUARIOS,OU=PSC,DC=PSC,DC=LOCAL
LDAP_USER_DN=admin.ldap
LDAP_PASSWORD=21mLJu1@3x9Z

# Filtro de busca de usuários
# Este filtro busca usuários que:
# - São pessoas (objectCategory=person)
# - São objetos de usuário (objectClass=user)
# - Têm conta habilitada (userAccountControl: 512, 544, 66048, 66050, 66080)
# - Pertencem ao grupo OPENFIRE
# - Têm o sAMAccountName correspondente
LDAP_USER_SEARCH_FILTER=(&(objectCategory=person)(objectClass=user)(|(userAccountControl=512)(userAccountControl=544)(userAccountControl=66048)(userAccountControl=66050)(userAccountControl=66080))(memberOf=CN=OPENFIRE,OU=OPENFIRE,OU=USUARIOS,OU=PSC,DC=PSC,DC=LOCAL)(sAMAccountName={username}))

# Campo de nome de usuário
LDAP_USERNAME_FIELD=sAMAccountName

# Filtro de grupos (opcional)
LDAP_GROUP_FILTER=(objectClass=group)

CACHE_TYPE=simple
CACHE_DEFAULT_TIMEOUT=300

# ============================================
# CONFIGURAÇÕES DE COMPRESSÃO
# ============================================

COMPRESS_LEVEL=6
COMPRESS_MIN_SIZE=500

# ============================================
# CONFIGURAÇÕES DE PRODUÇÃO (OPCIONAL)
# ============================================

# Para produção, configure:
# FLASK_ENV=production
# FLASK_DEBUG=False
# SECRET_KEY=<sua-chave-secreta-forte>
# DATABASE_URL=<url-do-banco-de-dados>
# SESSION_COOKIE_SECURE=True
# HOST=0.0.0.0
# PORT=80
